<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function isCycleObject(obj, parant) {
        let parantArr = parant || [obj];
        let flag = false;
        for (let i in obj) {
          if (typeof obj[i] === "object") {
            parantArr.forEach((pObj) => {
              if (pObj === obj[i]) {
                flag = true;
              }
              if (flag) {
                console.log("ğŸš€ğŸš€ğŸš€wimi======>>>å‡ºç°å¾ªç¯å¼•ç”¨å¯¹è±¡");
                return true;
              }
              flag = isCycleObject(obj[i], [...parantArr, obj[i]]);
              if (flag) {
                console.log("ğŸš€ğŸš€ğŸš€wimi======>>>å‡ºç°å¾ªç¯å¼•ç”¨å¯¹è±¡");
                return true;
              }
            });
          }
        }
        return flag;
      }

      // let stack = []; // å­˜åœ¨å¯¹è±¡ä¸­å·²ç»å‡ºç°çš„å¯¹è±¡

      // /**
      //  * @params {Object} obj éœ€è¦æ£€æŸ¥çš„å¯¹è±¡
      //  */
      // function checkObjCircularReference(obj) {
      //   for (let i = 0, len = stack.length; i < len; i++) {
      //     if (stack[i] === obj) {
      //       // å‡ºç°é‡å¤çš„å¯¹è±¡
      //       console.log("found CircularReference");
      //       throw TypeError();
      //     }
      //   }
      //   stack.push(obj);
      //   for (let key in obj) {
      //     let value = obj[key];
      //     if (typeof value === "object") {
      //       // å¯¹è±¡ç±»å‹å»æ£€æŸ¥
      //       checkObjCircularReference(value);
      //     }
      //   }
      //   // æ£€æŸ¥ç»“æŸ
      //   console.log("not found CircularReference");
      //   stack = [];
      // }

      let obj = { a: 1 };
      obj.b = obj;
      console.log("ğŸš€ğŸš€ğŸš€wimi======>>>obj", obj);
      console.log("ğŸš€ğŸš€ğŸš€wimi======>>>", isCycleObject(obj));
    </script>
  </body>
</html>
